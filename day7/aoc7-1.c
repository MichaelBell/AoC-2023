#include "../aoc.h"

#include <stdbool.h>
#include <stdlib.h>

#if 0
const char* data = "32T3K 765\n\
T55J5 684\n\
KK677 28\n\
KTJJT 220\n\
QQQJA 483\n";
#else
const char* data = "6A868 562\n\
KAKKA 232\n\
39399 272\n\
2J722 48\n\
5AQ36 444\n\
33633 619\n\
92QAJ 960\n\
TQ67J 879\n\
KT252 69\n\
AA9TA 702\n\
7Q3J3 421\n\
348T4 628\n\
533J5 264\n\
J88JT 636\n\
2T823 282\n\
37736 695\n\
JJQQQ 853\n\
4KA37 89\n\
4422J 152\n\
Q4646 149\n\
T2AQ7 819\n\
K3J39 730\n\
J88A4 329\n\
J647K 867\n\
J8Q47 584\n\
7J778 158\n\
99995 778\n\
624K7 113\n\
2KQ22 616\n\
73T3T 474\n\
44A3K 507\n\
4K649 206\n\
33683 565\n\
6T9T9 955\n\
6Q6K6 850\n\
TK5AA 157\n\
88228 868\n\
88222 787\n\
A778A 574\n\
T55AA 646\n\
393J3 246\n\
799K4 690\n\
63283 685\n\
86666 878\n\
TTT6T 948\n\
A8746 127\n\
QQ9QQ 428\n\
9J4AJ 248\n\
TA9TT 1000\n\
AQ853 546\n\
2A856 875\n\
K6666 683\n\
K3KK5 996\n\
T28J3 477\n\
5928T 74\n\
Q3467 491\n\
2J56J 177\n\
KKA6K 936\n\
9K239 626\n\
22A22 293\n\
A74Q5 688\n\
7J737 752\n\
JK73K 214\n\
AJJ97 986\n\
88585 260\n\
3Q4A7 107\n\
3T333 25\n\
777TJ 727\n\
8K6Q6 310\n\
J93QA 961\n\
AAK59 617\n\
48T65 886\n\
49268 621\n\
99969 473\n\
AJA8A 826\n\
79974 566\n\
K358J 610\n\
2222Q 456\n\
8J488 534\n\
K7J4A 488\n\
K636K 416\n\
43QT6 660\n\
28KTQ 907\n\
49699 989\n\
27469 858\n\
873JT 601\n\
6374J 98\n\
JTJTT 200\n\
2J978 2\n\
474J5 353\n\
A557K 515\n\
QT3TQ 632\n\
7A2A2 241\n\
97QAQ 484\n\
AK4AK 825\n\
4A884 905\n\
2558K 573\n\
AT322 227\n\
48AQ7 977\n\
QJJTJ 630\n\
955J9 651\n\
KK55J 409\n\
66392 927\n\
4AAAQ 234\n\
96QA3 51\n\
AQTAA 964\n\
K34J3 605\n\
Q9Q9Q 284\n\
93999 239\n\
65K7T 208\n\
JT9A6 377\n\
87QJ9 245\n\
J269K 207\n\
T2JTT 269\n\
47274 746\n\
5A96A 164\n\
QJJ5T 716\n\
AAT5A 199\n\
694K7 710\n\
T8TT6 569\n\
J6346 181\n\
4Q3JA 627\n\
8J7J8 974\n\
7T25K 753\n\
4A26J 288\n\
47TT4 830\n\
9J99J 758\n\
K3K3K 195\n\
TT9TK 715\n\
QJ22T 780\n\
A9944 742\n\
22229 600\n\
A996A 908\n\
22244 818\n\
Q878Q 620\n\
QQKJQ 334\n\
37JJ9 490\n\
625Q8 356\n\
J6666 958\n\
KJ8A8 341\n\
363A3 333\n\
6A2QK 398\n\
44J43 215\n\
QKKKK 86\n\
K8K8J 240\n\
44474 109\n\
8AAA6 328\n\
AQ2Q9 641\n\
JJJJJ 431\n\
8JJ86 829\n\
TTT9T 161\n\
TT779 470\n\
KA748 791\n\
3448K 440\n\
44424 427\n\
8T57J 803\n\
KQK4K 418\n\
T738A 599\n\
9K5AJ 354\n\
38353 700\n\
7K77K 541\n\
5A248 223\n\
2228J 973\n\
222J2 244\n\
73J85 391\n\
3Q3QT 67\n\
JJ666 890\n\
9Q797 180\n\
2J727 734\n\
QKKKQ 747\n\
3A333 658\n\
J5QAT 861\n\
45JAT 381\n\
66265 224\n\
QQQ4Q 582\n\
55766 615\n\
A7777 866\n\
JQ3AQ 718\n\
25225 921\n\
A666A 115\n\
933KK 174\n\
TTTT8 609\n\
886J8 509\n\
662AJ 366\n\
99TT5 990\n\
9462A 194\n\
45A5A 629\n\
46242 583\n\
TQTTT 433\n\
23888 24\n\
JQ94T 100\n\
56693 876\n\
T5835 295\n\
2K222 933\n\
43Q3Q 882\n\
33A93 607\n\
8A888 650\n\
KKK44 26\n\
2AAA2 139\n\
328K2 499\n\
TKTKK 671\n\
JJ64J 114\n\
22722 612\n\
75T8A 160\n\
T44TT 448\n\
47434 228\n\
39333 225\n\
44QKT 47\n\
Q863A 581\n\
A9A44 345\n\
TJ99T 795\n\
822Q2 12\n\
4649T 967\n\
T4J84 938\n\
63636 519\n\
Q8K44 190\n\
T928T 953\n\
698TA 50\n\
TJT53 311\n\
KQ99J 770\n\
37532 797\n\
KAQ85 13\n\
K8K3J 579\n\
Q86JT 842\n\
88J78 943\n\
22332 774\n\
25Q4T 998\n\
999TT 44\n\
595J8 514\n\
53335 31\n\
927K4 423\n\
29J27 252\n\
AT33A 209\n\
47887 874\n\
466A6 243\n\
J4873 359\n\
255J2 261\n\
TTT5T 129\n\
TQTTQ 896\n\
Q3222 401\n\
434K4 126\n\
555A5 550\n\
43T79 709\n\
KK944 679\n\
42T22 430\n\
Q9A75 673\n\
Q564J 984\n\
Q6QQ6 552\n\
A777K 185\n\
64564 589\n\
T53JK 736\n\
7383T 27\n\
JA299 652\n\
48469 369\n\
42Q8Q 978\n\
992KK 468\n\
AA6A2 233\n\
757TJ 363\n\
6Q75Q 347\n\
25552 308\n\
A88JT 136\n\
42TJ8 21\n\
T472K 806\n\
2228T 553\n\
6A739 388\n\
QTQTJ 386\n\
92J99 317\n\
J93J9 382\n\
5JAJ2 707\n\
382A7 73\n\
757A7 466\n\
4KAT3 191\n\
T7J45 118\n\
89Q2J 869\n\
A23KQ 942\n\
2T226 480\n\
JJJ42 420\n\
J8692 481\n\
57555 380\n\
3A233 840\n\
TTTJ4 699\n\
2K666 532\n\
A8QT3 38\n\
3QJ68 216\n\
J8Q2K 711\n\
37J6K 816\n\
5A8T8 684\n\
5K5QQ 287\n\
43TJ4 441\n\
T5T5J 378\n\
9K9K9 33\n\
A3939 838\n\
5J5J6 538\n\
7KKAK 982\n\
86822 371\n\
3333Q 854\n\
3AAA3 489\n\
666T7 903\n\
8Q898 365\n\
8T789 750\n\
877AK 32\n\
4JJ44 512\n\
Q2JKK 280\n\
4484A 913\n\
2772Q 434\n\
2J543 865\n\
72242 125\n\
A2852 296\n\
747KJ 315\n\
74449 242\n\
J4KA2 451\n\
9K9J2 560\n\
JKKJJ 703\n\
KK9K9 205\n\
39839 968\n\
KQ47J 664\n\
66J6Q 403\n\
A3TTJ 533\n\
TQ9A5 544\n\
J22AA 154\n\
48368 789\n\
KA462 500\n\
Q66Q6 485\n\
J22J6 751\n\
677JJ 995\n\
2AJ2Q 459\n\
2K7T6 940\n\
A9Q48 586\n\
AQAAQ 542\n\
J333J 253\n\
66259 338\n\
8TTT8 163\n\
J7586 213\n\
JA63Q 146\n\
QQQ8Q 61\n\
52J3Q 292\n\
QJJQT 807\n\
2KJKT 374\n\
577J5 320\n\
QQQ69 704\n\
448K6 689\n\
37A3A 884\n\
AAJ3A 462\n\
23339 969\n\
A3A2Q 384\n\
5K55J 783\n\
8AJ5K 549\n\
KQQ89 408\n\
4444A 809\n\
57535 355\n\
46566 314\n\
3Q399 567\n\
2QQ22 934\n\
QT6J3 801\n\
QTQAA 748\n\
K2K7K 97\n\
5J665 415\n\
4Q55T 140\n\
99A29 278\n\
7A523 701\n\
7J476 714\n\
6824A 464\n\
6JT42 681\n\
A9746 548\n\
56QAT 99\n\
222TT 463\n\
K4KKK 41\n\
88999 899\n\
AA556 606\n\
3Q533 283\n\
2T233 759\n\
32832 344\n\
6KKK6 71\n\
AA6Q6 476\n\
335K3 66\n\
3JT66 400\n\
935AK 676\n\
7TKAQ 332\n\
3J34A 712\n\
JK757 309\n\
9445J 331\n\
8KKK8 486\n\
Q6J98 720\n\
33898 623\n\
668Q6 776\n\
J8866 536\n\
888K8 824\n\
T3TJ6 883\n\
2AK24 613\n\
QAQJ9 424\n\
9666J 64\n\
A89K5 555\n\
3T9T5 672\n\
JQQQ6 657\n\
9J949 851\n\
KKJKK 144\n\
2J223 321\n\
544QT 162\n\
274J9 954\n\
6K4K3 648\n\
2QQ44 889\n\
92J29 92\n\
KKK8K 945\n\
T4TAA 176\n\
67AA4 135\n\
69666 698\n\
22333 147\n\
85855 419\n\
3A783 339\n\
J5KK4 763\n\
7877A 85\n\
44494 737\n\
A646J 820\n\
23JK3 259\n\
79777 799\n\
J999T 442\n\
5T65T 235\n\
K99K7 111\n\
9K47T 405\n\
5Q544 647\n\
534J4 786\n\
9T7K5 594\n\
97AT6 432\n\
39J22 455\n\
AT4AA 396\n\
KAKAJ 817\n\
T7T7T 492\n\
TTQK3 644\n\
QKQ33 102\n\
AAJ9A 504\n\
442JK 633\n\
245Q6 928\n\
TT755 963\n\
JQ334 326\n\
4KK44 495\n\
AKKAA 166\n\
54444 524\n\
J9QA9 932\n\
5T96A 70\n\
5QQJQ 323\n\
4KK33 18\n\
77J7J 435\n\
K2K62 992\n\
A594J 812\n\
TK6TQ 563\n\
Q4994 880\n\
37737 324\n\
A73A7 662\n\
4KK4J 350\n\
24Q8T 722\n\
77877 656\n\
TJTKQ 461\n\
2J224 383\n\
K9K89 123\n\
3A254 425\n\
335A5 981\n\
A3334 625\n\
A46Q3 169\n\
JJJJ8 618\n\
AJTQ6 771\n\
742J7 238\n\
TTT7T 935\n\
J9999 116\n\
567Q9 307\n\
6992J 274\n\
AT285 952\n\
6J83J 170\n\
5559T 302\n\
K9A43 81\n\
9TTT9 35\n\
7JQJ4 598\n\
AQAAA 285\n\
AKQ7Q 802\n\
AA266 141\n\
73537 717\n\
75Q77 479\n\
8J3Q3 745\n\
TT7T8 68\n\
77JK7 148\n\
J2Q22 187\n\
A7TQJ 247\n\
55QJJ 155\n\
K7275 145\n\
99977 342\n\
JQQQQ 595\n\
96KTQ 501\n\
88J44 902\n\
2442Q 540\n\
62262 556\n\
A333A 171\n\
9T6J4 941\n\
7J677 860\n\
AAAKA 693\n\
47337 42\n\
TJT7J 217\n\
TK964 52\n\
J43T6 75\n\
32666 449\n\
973QQ 757\n\
AQJK7 429\n\
KQ4T5 634\n\
9J899 559\n\
Q6Q97 268\n\
5QJT5 447\n\
A5A22 917\n\
224A2 294\n\
65555 522\n\
Q3439 539\n\
4KKK3 394\n\
867A9 389\n\
2TQ64 572\n\
88J88 920\n\
9JKK6 458\n\
T2ATT 437\n\
66QQ7 901\n\
6KK3K 53\n\
AT3K7 10\n\
37T95 178\n\
KA978 915\n\
77J72 604\n\
Q6378 210\n\
5QQ7A 494\n\
36KAQ 592\n\
64774 767\n\
36AT5 863\n\
T55QT 465\n\
35TK3 226\n\
AA975 835\n\
TA3JJ 202\n\
KQQKQ 63\n\
K9999 808\n\
K2645 395\n\
KK977 367\n\
K4TKK 622\n\
7J39T 951\n\
85528 279\n\
TKK5K 275\n\
72787 761\n\
62662 104\n\
55553 665\n\
3J3A7 843\n\
TTTTA 78\n\
TK3JT 521\n\
95984 713\n\
33433 508\n\
T44T4 897\n\
4J7Q9 172\n\
96732 756\n\
6AKJ8 849\n\
24888 686\n\
JTA2Q 694\n\
32QA3 654\n\
5JA6J 46\n\
QA2AA 121\n\
7777J 336\n\
A7A7A 402\n\
5555T 959\n\
62625 40\n\
2Q7QQ 937\n\
Q3547 805\n\
43T73 798\n\
AAAA4 754\n\
K3598 467\n\
TTAAK 677\n\
KQ4QJ 796\n\
3TA2A 132\n\
A6A9J 919\n\
62644 692\n\
QQJAA 453\n\
KKK93 153\n\
9999Q 471\n\
8848Q 189\n\
8A9K4 790\n\
62A5Q 862\n\
75QQJ 815\n\
AJAAA 1\n\
92929 276\n\
TTTJT 962\n\
KQKJ9 417\n\
J2K2J 837\n\
6A777 571\n\
8A82A 668\n\
543T2 361\n\
QQ774 505\n\
52468 138\n\
AA555 286\n\
77699 669\n\
A934Q 772\n\
9655T 728\n\
2K6T5 766\n\
JT4J5 4\n\
Q97J9 743\n\
99559 966\n\
A9A9A 37\n\
66J73 128\n\
AJQAA 375\n\
2T222 255\n\
K39A6 45\n\
8AKQ7 564\n\
TK777 706\n\
22942 975\n\
22JJ2 832\n\
9486T 733\n\
5T55Q 352\n\
K9874 94\n\
2TQ2T 16\n\
5K588 836\n\
6943T 666\n\
936TJ 385\n\
22A25 9\n\
A5A5Q 28\n\
4Q4J4 859\n\
444K4 281\n\
44KQ4 316\n\
KJ79Q 57\n\
A72T4 142\n\
A8544 643\n\
844K4 179\n\
T9TT5 839\n\
44545 110\n\
K67A7 83\n\
54434 79\n\
97977 922\n\
4222K 17\n\
55757 137\n\
5AJA2 87\n\
2JKK2 749\n\
65AAJ 88\n\
54555 270\n\
79786 103\n\
JAA33 794\n\
5AK73 744\n\
454K8 777\n\
55JJ5 184\n\
A9884 438\n\
777K7 482\n\
488J6 91\n\
68965 847\n\
K4KK6 124\n\
J9QA5 322\n\
KA5KK 498\n\
8J957 872\n\
88899 516\n\
ATA88 49\n\
2JKKK 848\n\
85553 529\n\
332Q3 300\n\
3QK33 483\n\
23253 93\n\
8K333 439\n\
3K9AT 775\n\
35KJK 422\n\
7J77A 445\n\
Q6J97 841\n\
Q9979 251\n\
38849 510\n\
TKKKK 130\n\
66T96 105\n\
7QQQ7 376\n\
32AAA 318\n\
2867Q 54\n\
97QK3 11\n\
KK77K 916\n\
7358A 898\n\
A7A47 768\n\
7Q57J 346\n\
KJ7TA 696\n\
J3637 904\n\
K8QJ3 192\n\
72994 358\n\
QQ74Q 387\n\
TK6TT 493\n\
9932T 373\n\
QQ4Q4 640\n\
J4258 729\n\
AQ444 289\n\
899JJ 697\n\
AAJ37 831\n\
38QT9 924\n\
9666A 513\n\
59Q2A 856\n\
Q7QTJ 393\n\
Q2Q9Q 721\n\
88383 193\n\
88882 256\n\
36T35 222\n\
AQ8Q9 3\n\
J999K 229\n\
JQT3A 29\n\
TT888 642\n\
78694 236\n\
939QA 675\n\
88A6K 290\n\
56J55 122\n\
33Q36 82\n\
27275 769\n\
62Q66 537\n\
KKKJ4 723\n\
99JJA 965\n\
62J42 478\n\
897KJ 645\n\
ATTT6 554\n\
2Q458 597\n\
99968 460\n\
44Q8Q 502\n\
8KKK5 43\n\
9K5K9 254\n\
45A44 496\n\
A4744 19\n\
5QQ3Q 900\n\
K3QKQ 793\n\
55665 305\n\
JQKTJ 475\n\
22K82 390\n\
A2299 804\n\
JTQKK 188\n\
J9494 80\n\
2JJTT 167\n\
2J229 410\n\
9966A 106\n\
4J88T 814\n\
5K8T6 813\n\
TAA6T 782\n\
TJ854 956\n\
66662 784\n\
TT889 577\n\
A3A24 443\n\
K27K2 55\n\
6Q368 397\n\
K5563 732\n\
8AAAA 870\n\
22226 892\n\
J333T 881\n\
44AJ4 372\n\
67K35 578\n\
843K2 319\n\
47K24 755\n\
9T76K 895\n\
AA993 873\n\
85888 72\n\
JKKQ3 670\n\
66667 90\n\
J59AJ 988\n\
TKJ62 738\n\
4446Q 95\n\
JT6KQ 864\n\
73254 764\n\
QAQAQ 949\n\
Q62JQ 779\n\
43K33 687\n\
8939Q 557\n\
8A784 34\n\
27727 528\n\
32TK3 637\n\
J3332 196\n\
Q5J2A 918\n\
JT6T7 411\n\
98888 511\n\
AAA2A 299\n\
4444J 112\n\
222KK 972\n\
93K48 173\n\
99499 277\n\
4K8QA 947\n\
J6TK3 518\n\
3KJA9 212\n\
JT5K6 291\n\
92KTQ 593\n\
84727 370\n\
66KKJ 231\n\
6J6A9 877\n\
475JA 739\n\
JK9KK 39\n\
2TQ3J 912\n\
TQ946 204\n\
2T9Q4 785\n\
333A8 8\n\
J7347 999\n\
4K28A 360\n\
85668 994\n\
ATAAA 211\n\
7JK99 250\n\
6A74K 788\n\
8A7QA 7\n\
4464T 392\n\
Q84T3 760\n\
39JQ3 413\n\
5776T 939\n\
77A7A 117\n\
25Q55 576\n\
6T372 450\n\
57595 925\n\
3333J 575\n\
48282 979\n\
JQ9J3 506\n\
62T66 312\n\
A888J 639\n\
45J36 263\n\
J8KKQ 525\n\
QQ42T 719\n\
64944 930\n\
Q54AJ 120\n\
A94QA 957\n\
QQ777 894\n\
2TT6K 348\n\
KJ264 379\n\
4666J 655\n\
64464 987\n\
447Q3 653\n\
A37K7 810\n\
J32AA 614\n\
ATTJT 399\n\
26263 62\n\
JQ423 765\n\
T8T8J 800\n\
T6AKA 15\n\
4QQQ3 596\n\
KQ7T6 724\n\
TT55T 708\n\
94Q72 183\n\
78TJJ 526\n\
T8KKK 970\n\
K888K 303\n\
6J5J8 201\n\
55255 156\n\
QQJ96 821\n\
3886J 891\n\
72722 56\n\
7KKKK 220\n\
6T6AQ 77\n\
52655 638\n\
68832 368\n\
86356 271\n\
K2879 976\n\
3859T 608\n\
QQ3Q3 108\n\
424A7 5\n\
A7TA5 631\n\
T535T 680\n\
53333 551\n\
5TT29 14\n\
J5274 580\n\
K7A9A 659\n\
T6T46 725\n\
7J87K 871\n\
45QAT 997\n\
67677 910\n\
47549 649\n\
TQKJ2 926\n\
99259 76\n\
J43J3 337\n\
KT3KK 219\n\
Q6K22 705\n\
6246A 426\n\
3J77Q 588\n\
59KK6 740\n\
T77JT 568\n\
33QQ3 667\n\
5J4JQ 931\n\
8T3TQ 946\n\
K4KA4 741\n\
KT4A6 143\n\
3TTQ3 887\n\
3KQ85 58\n\
QQKQ7 950\n\
KJ77K 351\n\
QQKQQ 457\n\
JKTTK 134\n\
66664 407\n\
28462 327\n\
K6774 258\n\
KKK9K 661\n\
T66T3 823\n\
44QQ4 330\n\
66AAJ 313\n\
QQTQT 175\n\
7774J 414\n\
K8858 527\n\
QA2T4 65\n\
35735 298\n\
Q928K 545\n\
3J662 570\n\
37438 349\n\
T64AJ 406\n\
8A2AQ 678\n\
8AKKJ 885\n\
TQ4A6 412\n\
5KQ5K 452\n\
AA3AT 36\n\
TT5TJ 131\n\
Q47K3 301\n\
99992 561\n\
6KQT8 249\n\
77557 198\n\
4TTAT 101\n\
43J47 257\n\
J6844 30\n\
4K454 531\n\
TTA5T 674\n\
Q9Q99 602\n\
QA694 267\n\
J6QT6 273\n\
65588 469\n\
4TTTT 84\n\
J35J7 603\n\
622J2 230\n\
34542 520\n\
TT2T2 168\n\
7K798 517\n\
63863 792\n\
TJ8TT 472\n\
38393 133\n\
JJQKK 691\n\
AAAJJ 852\n\
J655K 735\n\
KQ6JJ 182\n\
6QQQQ 929\n\
47T53 297\n\
JK665 911\n\
44433 454\n\
A6364 726\n\
J4K93 446\n\
548J8 60\n\
T52J8 611\n\
59885 340\n\
A8K8A 991\n\
A88A8 845\n\
66K56 218\n\
86626 834\n\
AAA59 624\n\
52422 325\n\
J3363 906\n\
JJKKK 262\n\
5JJ69 357\n\
879A4 543\n\
66T66 343\n\
9K574 96\n\
9AAAA 731\n\
77477 893\n\
AAA56 6\n\
555J5 306\n\
4K882 503\n\
TAK97 828\n\
22246 590\n\
A8AA9 497\n\
76779 888\n\
2AAJ4 150\n\
88848 151\n\
K73J8 436\n\
9393J 547\n\
6Q666 221\n\
55K7K 364\n\
KK2TT 335\n\
A222A 855\n\
93QQ9 265\n\
94443 833\n\
3AJ26 523\n\
2J233 663\n\
2347T 22\n\
49J6K 165\n\
33J98 762\n\
3Q594 304\n\
A2T3K 530\n\
2K53T 535\n\
8JK78 923\n\
2658J 846\n\
6766J 159\n\
J9988 635\n\
J8J88 20\n\
JA476 985\n\
J5355 781\n\
33365 404\n\
KKAKJ 773\n\
935TJ 980\n\
TJ522 186\n\
Q8QTQ 591\n\
3J238 587\n\
354QT 983\n\
67JQ8 993\n\
K6KK8 914\n\
3TTT3 362\n\
J8KAT 585\n\
QQQ9T 59\n\
A8JA8 23\n\
38742 237\n\
QQQ3Q 558\n\
6J68A 811\n\
5433A 119\n\
8T8KJ 971\n\
94AJA 944\n\
783T7 844\n\
22JK2 857\n\
8KA5A 197\n\
J4JJ4 203\n\
77773 682\n\
5J455 909\n\
K4Q4Q 266\n\
99787 827\n\
5727J 487\n\
T92Q6 822\n";
#endif

typedef struct {
    const char* hand;
    int bid;
} hand_t;

#define MAX_HANDS 1000
hand_t hands[MAX_HANDS];
int num_hands = 0;

#define NUM_CARDS 13
const char* card_map = "23456789TJQKA";

int get_card_rank(const char card) {
    for (int j = 0; j < NUM_CARDS; ++j) {
        if (card_map[j] == card) {
            return j;
        }
    }
    fail();
    return -1;
}

int hand_type(const hand_t* h) {
    int counts[NUM_CARDS] = {0};

    for (int i = 0; i < 5; ++i) {
        counts[get_card_rank(h->hand[i])]++;
    }

    int max = 0;
    int max2 = 0;
    for (int j = 0; j < NUM_CARDS; ++j) {
        if (counts[j] > max) {
            max2 = max;
            max = counts[j];
        }
        else if (counts[j] > max2) {
            max2 = counts[j];
        }
    }

    if (max == 5) return 7;
    if (max == 4) return 6;
    if (max == 3 && max2 == 2) return 5;
    if (max == 3) return 4;
    if (max == 2 && max2 == 2) return 3;
    if (max == 2) return 2;
    if (max == 1 && max2 == 1) return 1;
    fail();
    return 0;
}

// Returns if a better than b
int compare_hands(const hand_t* a, const hand_t* b) {
    int type_a = hand_type(a);
    int type_b = hand_type(b);
    if (type_a != type_b) return type_a - type_b;

    for (int i = 0; i < 5; ++i) {
        int card_rank_a = get_card_rank(a->hand[i]);
        int card_rank_b = get_card_rank(b->hand[i]);
        
        if (card_rank_a != card_rank_b) return card_rank_a - card_rank_b;
    }

    fail();
    return 0;
}

int main()
{
    const char* ptr = data;

    while (*ptr) {
        const char* end;
        end = read_alphanum(ptr);
        if (end - ptr != 5) fail();
        hands[num_hands].hand = ptr;
        ptr = end;
        if (*ptr++ != ' ') fail();

        ptr = read_num(ptr, &hands[num_hands++].bid);
        if (*ptr++ != '\n') fail();
    }

    qsort(hands, num_hands, sizeof(hand_t), compare_hands);

    int score = 0;
    for (int i = 0; i < num_hands; ++i) {
        printf("%.5s %d\n", hands[i].hand, hands[i].bid);
        score += (i+1) * hands[i].bid;
    }

    printf("%d\n", score);

    return 0;
}
